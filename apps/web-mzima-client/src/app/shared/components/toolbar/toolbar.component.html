<mat-toolbar class="toolbar">
  <mzima-client-button
    fill="clear"
    color="secondary"
    [iconOnly]="true"
    (buttonClick)="back()"
    class="toolbar__back"
    *ngIf="!isDesktop && isInnerPage"
  >
    <mat-icon icon svgIcon="back"></mat-icon>
  </mzima-client-button>
  <h1 class="toolbar__page-title" [data-qa]="'page-title'" *ngIf="isDesktop || !showSearchForm">
    {{ pageTitle | translate }}
  </h1>
  <div class="toolbar__controls">
    <app-search-form
      [isFiltersVisible]="isFiltersVisible"
      [isMainFiltersOpen]="isMainFiltersOpen"
      [form]="form"
      (applyFilters)="applyFilters()"
      (searchPosts)="searchPosts($event)"
      class="search-form"
      *ngIf="showSearchForm"
    ></app-search-form>
    <mzima-client-button
      [fill]="isDesktop ? 'clear' : 'outline'"
      [color]="isDesktop ? 'gray' : 'secondary'"
      class="search-form__filters"
      *ngIf="(isDesktop || isMapView) && showSearchForm"
      (buttonClick)="toggleFilters(!isFiltersVisible)"
      [data-qa]="'search-form__filters'"
    >
      <span>{{ 'app.filters' | translate }}</span>
      <mat-icon iconPrefix svgIcon="filters"></mat-icon>
    </mzima-client-button>
    <app-share-and-donate *ngIf="isDesktop"></app-share-and-donate>
    <app-language
      class="toolbar__language"
      [languages]="languages"
      [selectedLanguage]="selectedLanguage"
    ></app-language>
  </div>
  <app-account-and-logout class="account"></app-account-and-logout>
  <mzima-client-button
    fill="clear"
    class="burger"
    color="secondary"
    [iconOnly]="true"
    *ngIf="!isDesktop"
    (buttonClick)="toggleBurgerMenu()"
    [ariaLabel]="'nav.open_menu' | translate"
  >
    <mat-icon icon svgIcon="hamburger"></mat-icon>
  </mzima-client-button>
  <app-main-filters
    *ngIf="showSearchForm"
    [hidden]="!isFiltersVisible"
    [form]="form"
    [isFiltersVisible]="isFiltersVisible"
    [canCreateSearch]="canCreateSearch"
    [isMainFiltersOpen]="isMainFiltersOpen"
    [isEditAvailable]="isEditAvailable"
    [surveyList]="surveyList"
    [savedSearches]="savedSearches"
    [sources]="sources"
    [statuses]="statuses"
    [categoriesData]="categoriesData"
    [activeSavedSearchValue]="activeSavedSearchValue"
    (applyFilters)="applyFilters()"
    (applyFilters)="clearFilter($event)"
    (saveSearch)="saveSearch()"
    (toggleFilters)="toggleFilters($event)"
    (resetSavedFilter)="resetSavedFilter()"
    (applyAndClose)="applyAndClose()"
    (applySavedFilter)="applySavedFilter($event)"
    (toggleSidebarFilters)="toggleSidebarFilters($event)"
  ></app-main-filters>
  <app-survey-filters
    *ngIf="showSearchForm"
    [form]="form"
    [total]="total"
    [notMappedPostsCount]="notMappedPostsCount"
    [collectionInfo]="collectionInfo"
    [surveyList]="surveyList"
    [sources]="sources"
    [isMapView]="isMapView"
    [isLoggedIn]="isLoggedIn"
    [isFiltersVisible]="isFiltersVisible"
    [isMainFiltersOpen]="isMainFiltersOpen"
    [isOnboardingActive]="isOnboardingActive"
    [surveysLoaded]="surveysLoaded"
    [isNotificationsOn]="isNotificationsOn"
    [isNotificationLoading]="isNotificationLoading"
    [activeSavedSearch]="activeSavedSearch"
    (applyFilters)="applyFilters()"
    (toggleMainFilters)="toggleMainFilters()"
    (toggleSidebarFilters)="toggleSidebarFilters($event)"
    (clearSavedFilter)="clearSavedFilter()"
    (clearFilter)="clearFilter($event)"
    (clearCollection)="clearCollection()"
    (changeNorificationStatus)="changeNorificationStatus($event)"
  ></app-survey-filters>
</mat-toolbar>

<app-mobile-menu></app-mobile-menu>
